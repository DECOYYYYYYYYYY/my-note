# HTML

## 综述

### 页面渲染原理

渲染流程：

1. 解析HTML，生成DOM树；解析CSS，生成CSSOM树（并行）
2. 将DOM树和CSSOM树结合，生成渲染树(Render Tree)
3. Layout：根据生成的渲染树，将所有的节点在平面上合成
4. Painting：根据渲染树以及回流得到的几何信息，得到节点的绝对像素
5. Display:将像素发送给GPU，展示在页面上。（GPU会将多个合成层合并为同一个层并展示在页面中。css3硬件加速的原理是新建合成层）

回流与重绘：

- 回流（reflow）：渲染树因为元素的改变而需要重新构建，重新触发上述③。回流结束后一定会触发重绘
- 重绘（repaint）：渲染树的一些元素需要更新属性，重新触发上述④，且这些属性只会影响外观，风格，不影响布局
- 浏览器一般有队列机制，将多次修改存储起来一次性回流，但**获取布局信息**时会强制清空队列进行回流与重绘

会触发回流与重绘的操作：

1. 添加、删除元素(回流+重绘)
2. 隐藏元素，display:none(回流+重绘)，visibility:hidden(只重绘)
3. 移动元素，如改变top、left或移动元素到另外1个父元素中(重绘+回流)
4. 改变浏览器大小(回流+重绘)
5. 改变浏览器的字体大小(回流+重绘)
6. 改变元素的padding、border、margin(回流+重绘)
7. 改变浏览器的字体颜色（只重绘）
8. 改变元素的背景颜色（只重绘）
   
